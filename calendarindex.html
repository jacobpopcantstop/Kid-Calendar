<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accessible Calendar for Special Needs</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Comic Sans', cursive;
            font-size: 25pt;
            font-weight: bold;
            background-color: #f0f0f0;
            color: #000;
            padding: 20px;
            line-height: 1.6;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            background-color: #4CAF50;
            color: white;
            padding: 20px;
            border-radius: 10px;
            border: 3px solid #000;
        }

        header h1 {
            font-size: 35pt;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        button {
            font-family: 'Comic Sans MS', 'Comic Sans', cursive;
            font-size: 25pt;
            font-weight: bold;
            padding: 15px 30px;
            background-color: #2196F3;
            color: white;
            border: 3px solid #000;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 150px;
        }

        button:hover {
            background-color: #0b7dda;
            transform: scale(1.05);
        }

        button:active {
            transform: scale(0.95);
        }

        button:focus {
            outline: 4px solid #FFD700;
            outline-offset: 2px;
        }

        .month-year {
            font-size: 32pt;
            text-align: center;
            margin: 20px 0;
            color: #000;
            background-color: #FFD700;
            padding: 15px;
            border-radius: 10px;
            border: 3px solid #000;
        }

        .calendar-container {
            background-color: white;
            border: 3px solid #000;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            background-color: #FF6B6B;
            gap: 0;
            border-bottom: 3px solid #000;
        }

        .weekday {
            padding: 15px;
            text-align: center;
            font-weight: bold;
            color: white;
            border-right: 2px solid #000;
            font-size: 22pt;
        }

        .weekday:last-child {
            border-right: none;
        }

        .weekday.weekend {
            background-color: #FF9999;
        }

        .days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0;
        }

        .day {
            min-height: 120px;
            border: 2px solid #ccc;
            padding: 12px;
            background-color: white;
            position: relative;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .day:hover {
            background-color: #e8f5e9;
        }

        .day.other-month {
            background-color: #f5f5f5;
            color: #999;
        }

        .day.weekend {
            background-color: #fff3cd;
        }

        .day.today {
            background-color: #c8e6c9;
            border: 3px solid #4CAF50;
        }

        .day-number {
            font-size: 20pt;
            font-weight: bold;
            margin-bottom: 8px;
            color: #000;
        }

        .events {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .event {
            font-size: 14pt;
            padding: 6px;
            border-radius: 5px;
            border: 1px solid #000;
            word-wrap: break-word;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .event.new {
            background-color: #90EE90;
            color: #000;
            border: 2px solid #228B22;
        }

        .event.recurring {
            background-color: #87CEEB;
            color: #000;
            border: 2px solid #0047AB;
        }

        .event.timed {
            background-color: #FFB347;
            color: #000;
            border: 2px solid #FF8C00;
        }

        .event.deadline {
            background-color: #FFB6C1;
            color: #000;
            border: 2px solid #DC143C;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal.show {
            display: block;
        }

        .modal-content {
            background-color: white;
            margin: 50px auto;
            padding: 30px;
            border: 4px solid #000;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            font-size: 28pt;
            margin-bottom: 20px;
            color: #2196F3;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-size: 22pt;
            color: #000;
        }

        input[type="text"],
        input[type="time"],
        select,
        textarea {
            font-family: 'Comic Sans MS', 'Comic Sans', cursive;
            font-size: 22pt;
            font-weight: bold;
            width: 100%;
            padding: 12px;
            border: 2px solid #000;
            border-radius: 8px;
            background-color: #f9f9f9;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: 3px solid #FFD700;
            outline-offset: 2px;
            background-color: #fffacd;
        }

        .checkbox-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        input[type="checkbox"] {
            width: 30px;
            height: 30px;
            cursor: pointer;
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .btn-save {
            background-color: #4CAF50;
            flex: 1;
            min-width: 120px;
        }

        .btn-cancel {
            background-color: #f44336;
            flex: 1;
            min-width: 120px;
        }

        .btn-delete {
            background-color: #ff9800;
            flex: 1;
            min-width: 120px;
        }

        .color-legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            border: 3px solid #000;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .legend-color {
            width: 60px;
            height: 60px;
            border: 2px solid #000;
            border-radius: 5px;
        }

        .legend-text {
            font-size: 20pt;
        }

        @media print {
            body {
                background-color: white;
                padding: 10px;
            }

            header {
                page-break-after: avoid;
            }

            .controls {
                display: none;
            }

            .modal {
                display: none;
            }

            .calendar-container {
                page-break-inside: avoid;
                border: 2px solid #000;
            }

            .day {
                min-height: 80px;
                border: 1px solid #000;
                page-break-inside: avoid;
            }

            .event {
                font-size: 12pt;
                padding: 4px;
            }

            button {
                display: none;
            }

            .color-legend {
                page-break-inside: avoid;
            }
        }

        .event-detail {
            font-size: 16pt;
            margin-top: 8px;
            color: #333;
            font-weight: normal;
        }

        .time-display {
            font-size: 18pt;
            font-weight: bold;
            color: #D2691E;
        }

        .recurring-badge {
            font-size: 14pt;
            color: #0047AB;
            font-weight: bold;
        }

        .close-modal {
            position: absolute;
            right: 20px;
            top: 15px;
            font-size: 30pt;
            cursor: pointer;
            color: #f44336;
            background: none;
            border: none;
            padding: 0;
            min-width: auto;
        }

        .close-modal:hover {
            transform: scale(1.2);
        }

        .modal-content {
            position: relative;
        }

        .event-list {
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            max-height: 150px;
            overflow-y: auto;
        }

        .event-list-item {
            background-color: white;
            padding: 10px;
            margin-bottom: 8px;
            border-radius: 5px;
            border-left: 4px solid #2196F3;
            font-size: 18pt;
        }

        .no-events {
            color: #999;
            font-style: italic;
        }

        @media (max-width: 1024px) {
            .weekdays,
            .days-grid {
                grid-template-columns: repeat(7, 1fr);
            }

            .day {
                min-height: 100px;
                font-size: 20pt;
            }

            .event {
                font-size: 13pt;
            }
        }

        @media (max-width: 768px) {
            body {
                font-size: 20pt;
                padding: 10px;
            }

            header h1 {
                font-size: 28pt;
            }

            .day {
                min-height: 80px;
                padding: 8px;
            }

            .event {
                font-size: 12pt;
            }

            .month-year {
                font-size: 26pt;
            }

            button {
                font-size: 20pt;
                padding: 12px 20px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>üìÖ Special Needs School Calendar</h1>
        <p>Large Text ‚Ä¢ Easy to Read ‚Ä¢ Colorful Events</p>
    </header>

    <div class="color-legend">
        <div class="legend-item">
            <div class="legend-color" style="background-color: #90EE90; border: 2px solid #228B22;"></div>
            <div class="legend-text">üÜï New Events</div>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #87CEEB; border: 2px solid #0047AB;"></div>
            <div class="legend-text">üîÑ Recurring</div>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #FFB347; border: 2px solid #FF8C00;"></div>
            <div class="legend-text">‚è∞ Timed Event</div>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background-color: #FFB6C1; border: 2px solid #DC143C;"></div>
            <div class="legend-text">üìå Deadline</div>
        </div>
    </div>

    <div class="controls">
        <button id="prevBtn" aria-label="Previous month">‚Üê PREVIOUS</button>
        <button id="todayBtn" aria-label="Go to today">üìç TODAY</button>
        <button id="nextBtn" aria-label="Next month">NEXT ‚Üí</button>
        <button id="addEventBtn" aria-label="Add new event">‚ûï ADD EVENT</button>
        <button id="printBtn" aria-label="Print calendar">üñ®Ô∏è PRINT</button>
    </div>

    <div class="month-year" id="monthYear"></div>

    <div class="calendar-container">
        <div class="weekdays">
            <div class="weekday">MON</div>
            <div class="weekday">TUE</div>
            <div class="weekday">WED</div>
            <div class="weekday">THU</div>
            <div class="weekday">FRI</div>
            <div class="weekday weekend">SAT</div>
            <div class="weekday weekend">SUN</div>
        </div>
        <div class="days-grid" id="daysGrid"></div>
    </div>

    <!-- Add/Edit Event Modal -->
    <div id="eventModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" id="closeModal" aria-label="Close modal">&times;</button>
            <div class="modal-header" id="modalTitle">Add New Event</div>

            <div class="form-group">
                <label for="eventTitle">Event Title</label>
                <input type="text" id="eventTitle" placeholder="e.g., Art Class, Lunch Time" required>
            </div>

            <div class="form-group">
                <label for="eventDate">Select Date</label>
                <input type="text" id="eventDate" readonly placeholder="Click on calendar to select date">
            </div>

            <div class="form-group">
                <label for="eventTime">Time (Optional)</label>
                <input type="time" id="eventTime">
            </div>

            <div class="form-group">
                <label for="eventType">Event Type</label>
                <select id="eventType">
                    <option value="new">üÜï New Event</option>
                    <option value="recurring">üîÑ Recurring Event</option>
                    <option value="timed">‚è∞ Timed Event</option>
                    <option value="deadline">üìå Deadline</option>
                </select>
            </div>

            <div class="form-group">
                <label>Repeat Pattern (for recurring events)</label>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" id="repeatMonday" value="1">
                        <label for="repeatMonday">Mon</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="repeatTuesday" value="2">
                        <label for="repeatTuesday">Tue</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="repeatWednesday" value="3">
                        <label for="repeatWednesday">Wed</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="repeatThursday" value="4">
                        <label for="repeatThursday">Thu</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="repeatFriday" value="5">
                        <label for="repeatFriday">Fri</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="repeatSaturday" value="6">
                        <label for="repeatSaturday">Sat</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" id="repeatSunday" value="0">
                        <label for="repeatSunday">Sun</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="eventDescription">Description (Optional)</label>
                <textarea id="eventDescription" placeholder="Add details about the event..."></textarea>
            </div>

            <div class="modal-buttons">
                <button class="btn-save" id="saveEventBtn">üíæ SAVE</button>
                <button class="btn-delete" id="deleteEventBtn" style="display:none;">üóëÔ∏è DELETE</button>
                <button class="btn-cancel" id="cancelBtn">‚ùå CANCEL</button>
            </div>
        </div>
    </div>

    <script>
        // State Management
        let currentDate = new Date();
        let events = [];
        let editingEventId = null;

        // Load events from localStorage
        function loadEvents() {
            const stored = localStorage.getItem('calendarEvents');
            if (stored) {
                events = JSON.parse(stored);
            }
        }

        // Save events to localStorage
        function saveEvents() {
            localStorage.setItem('calendarEvents', JSON.stringify(events));
        }

        // Initialize
        function init() {
            loadEvents();
            renderCalendar();
            attachEventListeners();
        }

        // Get all events for a specific date
        function getEventsForDate(date) {
            const dateStr = formatDate(date);
            let result = [];

            events.forEach(event => {
                if (event.recurring && event.recurringDays) {
                    const dayOfWeek = date.getDay();
                    if (event.recurringDays.includes(dayOfWeek.toString())) {
                        result.push(event);
                    }
                } else if (event.date === dateStr) {
                    result.push(event);
                }
            });

            return result;
        }

        // Format date as YYYY-MM-DD
        function formatDate(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        // Format date for display
        function formatDateDisplay(dateStr) {
            const [year, month, day] = dateStr.split('-');
            return `${month}/${day}/${year}`;
        }

        // Render calendar
        function renderCalendar() {
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();

            // Update month/year display
            const options = { month: 'long', year: 'numeric' };
            document.getElementById('monthYear').textContent =
                currentDate.toLocaleDateString('en-US', options).toUpperCase();

            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const daysInPrevMonth = new Date(year, month, 0).getDate();

            // Adjust for Monday start (0 = Sunday, need to convert)
            const adjustedFirstDay = firstDay === 0 ? 6 : firstDay - 1;

            const daysGrid = document.getElementById('daysGrid');
            daysGrid.innerHTML = '';

            // Previous month's days
            for (let i = adjustedFirstDay - 1; i >= 0; i--) {
                const dayNum = daysInPrevMonth - i;
                const dayElement = createDayElement(dayNum, true, null);
                daysGrid.appendChild(dayElement);
            }

            // Current month's days
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month, day);
                const isToday = isDateToday(date);
                const dayElement = createDayElement(day, false, date, isToday);
                daysGrid.appendChild(dayElement);
            }

            // Next month's days
            const totalCells = daysGrid.children.length;
            const remainingCells = 42 - totalCells; // 6 rows √ó 7 days
            for (let day = 1; day <= remainingCells; day++) {
                const dayElement = createDayElement(day, true, null);
                daysGrid.appendChild(dayElement);
            }
        }

        // Create day element
        function createDayElement(dayNum, isOtherMonth, date, isToday = false) {
            const dayElement = document.createElement('div');
            dayElement.className = 'day';

            if (isOtherMonth) {
                dayElement.classList.add('other-month');
            }

            if (date) {
                const dayOfWeek = date.getDay();
                if (dayOfWeek === 0 || dayOfWeek === 6) {
                    dayElement.classList.add('weekend');
                }

                if (isToday) {
                    dayElement.classList.add('today');
                }

                dayElement.onclick = () => openEventModal(date);
            }

            const dayNumber = document.createElement('div');
            dayNumber.className = 'day-number';
            dayNumber.textContent = dayNum;
            dayElement.appendChild(dayNumber);

            if (date) {
                const dayEvents = getEventsForDate(date);
                if (dayEvents.length > 0) {
                    const eventsContainer = document.createElement('div');
                    eventsContainer.className = 'events';

                    dayEvents.forEach(event => {
                        const eventElement = document.createElement('div');
                        eventElement.className = `event ${event.eventType}`;

                        let eventText = event.title;
                        if (event.time) {
                            eventText = `${event.time} ${event.title}`;
                        }

                        if (event.recurring) {
                            eventText += ' üîÑ';
                        }

                        eventElement.textContent = eventText;
                        eventElement.title = event.description || event.title;
                        eventElement.onclick = (e) => {
                            e.stopPropagation();
                            openEventModal(date, event.id);
                        };

                        eventsContainer.appendChild(eventElement);
                    });

                    dayElement.appendChild(eventsContainer);
                }
            }

            return dayElement;
        }

        // Check if date is today
        function isDateToday(date) {
            const today = new Date();
            return date.getDate() === today.getDate() &&
                   date.getMonth() === today.getMonth() &&
                   date.getFullYear() === today.getFullYear();
        }

        // Open event modal
        function openEventModal(date, eventId = null) {
            editingEventId = eventId;
            const modal = document.getElementById('eventModal');
            const modalTitle = document.getElementById('modalTitle');
            const deleteBtn = document.getElementById('deleteEventBtn');

            // Reset form
            document.getElementById('eventTitle').value = '';
            document.getElementById('eventTime').value = '';
            document.getElementById('eventType').value = 'new';
            document.getElementById('eventDescription').value = '';
            document.getElementById('eventDate').value = formatDateDisplay(formatDate(date));

            // Reset checkboxes
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });

            if (eventId) {
                const event = events.find(e => e.id === eventId);
                if (event) {
                    modalTitle.textContent = 'Edit Event';
                    document.getElementById('eventTitle').value = event.title;
                    document.getElementById('eventTime').value = event.time || '';
                    document.getElementById('eventType').value = event.eventType;
                    document.getElementById('eventDescription').value = event.description || '';

                    if (event.recurringDays) {
                        event.recurringDays.forEach(day => {
                            const dayMap = {
                                '0': 'Sunday',
                                '1': 'Monday',
                                '2': 'Tuesday',
                                '3': 'Wednesday',
                                '4': 'Thursday',
                                '5': 'Friday',
                                '6': 'Saturday'
                            };
                            document.getElementById(`repeat${dayMap[day]}`).checked = true;
                        });
                    }

                    deleteBtn.style.display = 'block';
                }
            } else {
                modalTitle.textContent = 'Add New Event';
                deleteBtn.style.display = 'none';
            }

            modal.classList.add('show');
        }

        // Close event modal
        function closeEventModal() {
            const modal = document.getElementById('eventModal');
            modal.classList.remove('show');
            editingEventId = null;
        }

        // Save event
        function saveEvent() {
            const title = document.getElementById('eventTitle').value.trim();
            const time = document.getElementById('eventTime').value;
            const eventType = document.getElementById('eventType').value;
            const description = document.getElementById('eventDescription').value;
            const dateStr = document.getElementById('eventDate').value;

            if (!title || !dateStr) {
                alert('Please fill in event title and date');
                return;
            }

            // Get recurring days if selected
            const recurringDays = [];
            ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'].forEach((day, index) => {
                const checkbox = document.getElementById(`repeat${day}`);
                if (checkbox && checkbox.checked) {
                    recurringDays.push(index === 6 ? '0' : index + 1);
                }
            });

            const isRecurring = recurringDays.length > 0;

            if (editingEventId) {
                // Update existing event
                const eventIndex = events.findIndex(e => e.id === editingEventId);
                if (eventIndex !== -1) {
                    events[eventIndex] = {
                        id: editingEventId,
                        title,
                        date: dateStr.split('/').reverse().join('-'),
                        time,
                        eventType,
                        description,
                        recurring: isRecurring,
                        recurringDays: isRecurring ? recurringDays : []
                    };
                }
            } else {
                // Create new event
                const newEvent = {
                    id: Date.now().toString(),
                    title,
                    date: dateStr.split('/').reverse().join('-'),
                    time,
                    eventType,
                    description,
                    recurring: isRecurring,
                    recurringDays: isRecurring ? recurringDays : []
                };
                events.push(newEvent);
            }

            saveEvents();
            renderCalendar();
            closeEventModal();
        }

        // Delete event
        function deleteEvent() {
            if (editingEventId && confirm('Are you sure you want to delete this event?')) {
                events = events.filter(e => e.id !== editingEventId);
                saveEvents();
                renderCalendar();
                closeEventModal();
            }
        }

        // Attach event listeners
        function attachEventListeners() {
            document.getElementById('prevBtn').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                renderCalendar();
            });

            document.getElementById('nextBtn').addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                renderCalendar();
            });

            document.getElementById('todayBtn').addEventListener('click', () => {
                currentDate = new Date();
                renderCalendar();
            });

            document.getElementById('addEventBtn').addEventListener('click', () => {
                openEventModal(new Date());
            });

            document.getElementById('printBtn').addEventListener('click', () => {
                window.print();
            });

            document.getElementById('closeModal').addEventListener('click', closeEventModal);
            document.getElementById('cancelBtn').addEventListener('click', closeEventModal);
            document.getElementById('saveEventBtn').addEventListener('click', saveEvent);
            document.getElementById('deleteEventBtn').addEventListener('click', deleteEvent);

            // Close modal when clicking outside
            document.getElementById('eventModal').addEventListener('click', (e) => {
                if (e.target.id === 'eventModal') {
                    closeEventModal();
                }
            });

            // Keyboard accessibility
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeEventModal();
                }
            });
        }

        // Start the app
        init();
    </script>
</body>
</html>
